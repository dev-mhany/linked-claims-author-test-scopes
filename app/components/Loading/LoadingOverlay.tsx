import React from 'react'
import { Box, Typography, styled, keyframes } from '@mui/material'

interface LoadingOverlayProps {
  text?: string
  open: boolean
}

const spin = keyframes`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`

const Spinner = styled('div')({
  animation: `${spin} 1s linear infinite`,
  display: 'flex',
  alignItems: 'center',
  justifyContent: 'center',
  '& svg': {
    width: 94,
    height: 95
  }
})

const LoadingOverlay: React.FC<LoadingOverlayProps> = ({ text = 'Loading...', open }) => {
  if (!open) return null

  return (
    <Box
      sx={{
        position: 'fixed',
        top: 0,
        left: 0,
        width: '100vw',
        height: '100vh',
        bgcolor: '#090835E5',
        color: 'white',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        flexDirection: 'column',
        zIndex: 9999
      }}
    >
      <Typography variant='h6' sx={{ mb: 2 }}>
        {text}
      </Typography>
      <Spinner>
        <svg
          width='94'
          height='95'
          viewBox='0 0 94 95'
          fill='none'
          xmlns='http://www.w3.org/2000/svg'
        >
          <path
            d='M90.4688 43.2869L73.75 43.6212C72.8632 43.6212 72.0127 43.9735 71.3856 44.6006C70.7585 45.2277 70.4062 46.0782 70.4062 46.965C70.4062 47.8518 70.7585 48.7023 71.3856 49.3294C72.0127 49.9565 72.8632 50.3087 73.75 50.3087L90.4688 49.9744C91.3556 49.9744 92.2061 49.6221 92.8331 48.995C93.4602 48.3679 93.8125 47.5174 93.8125 46.6306C93.8125 45.7438 93.4602 44.8933 92.8331 44.2662C92.2061 43.6392 91.3556 43.2869 90.4688 43.2869Z'
            fill='white'
          />
          <path
            d='M69.337 40.1103C69.3092 39.3598 69.5349 38.6218 69.9777 38.0153C70.4205 37.4087 71.0546 36.9688 71.7779 36.7666L87.8279 32.1188C88.6792 31.8704 89.5944 31.9705 90.3719 32.3969C91.1495 32.8233 91.7258 33.5412 91.9741 34.3925C92.0965 34.8162 92.1338 35.26 92.0839 35.6982C92.034 36.1364 91.8979 36.5604 91.6834 36.9458C91.469 37.3312 91.1804 37.6703 90.8343 37.9437C90.4883 38.2171 90.0915 38.4193 89.667 38.5388L73.7507 43.2534C72.8994 43.5017 71.9842 43.4017 71.2067 42.9753C70.4291 42.5489 69.8528 41.831 69.6045 40.9797C69.4957 40.6963 69.4063 40.4058 69.337 40.1103ZM66.5616 33.7238C66.5466 33.1354 66.687 32.5535 66.9688 32.0369C67.2506 31.5202 67.6638 31.0871 68.1666 30.7813L82.4779 22.1544C82.8534 21.8585 83.2879 21.6466 83.7522 21.5329C84.2165 21.4193 84.6998 21.4065 85.1695 21.4954C85.6392 21.5843 86.0843 21.7729 86.4749 22.0485C86.8655 22.3241 87.1925 22.6802 87.4338 23.0928C87.6751 23.5054 87.8251 23.965 87.8738 24.4406C87.9224 24.9161 87.8685 25.3965 87.7157 25.8495C87.5629 26.3024 87.3148 26.7174 86.9881 27.0663C86.6613 27.4152 86.2636 27.69 85.8216 27.8722L71.5104 36.5325C70.764 36.9463 69.8877 37.0591 69.0609 36.8477C68.2341 36.6363 67.5194 36.1168 67.0632 35.3956C66.7509 34.8926 66.5779 34.3156 66.5616 33.7238Z'
            fill='#273A59'
          />
          <path
            d='M62.181 28.2734C62.1669 27.3894 62.5036 26.5358 63.1172 25.8994L74.6866 13.8284C75.303 13.1855 76.1495 12.8137 77.0399 12.7949C77.9304 12.7761 78.7918 13.1118 79.4348 13.7281C80.0777 14.3445 80.4495 15.191 80.4683 16.0814C80.4871 16.9719 80.1514 17.8333 79.5351 18.4763L67.9323 30.5138C67.4745 30.9891 66.8862 31.3183 66.2417 31.46C65.5971 31.6017 64.9251 31.5495 64.3101 31.31C63.6952 31.0704 63.1649 30.6543 62.786 30.1139C62.4071 29.5736 62.1966 28.9332 62.181 28.2734ZM56.5635 24.0938C56.5492 23.511 56.6876 22.9347 56.9647 22.4219L65.0232 7.77625C65.236 7.3919 65.5225 7.05325 65.8663 6.77967C66.2101 6.50609 66.6044 6.30294 67.0267 6.18184C67.449 6.06073 67.8911 6.02404 68.3276 6.07386C68.7641 6.12368 69.1865 6.25903 69.5707 6.47219C70.3438 6.89625 70.9181 7.60851 71.1685 8.45393C71.419 9.29935 71.3255 10.2095 70.9082 10.9863L62.8163 25.6653C62.3922 26.4384 61.68 27.0127 60.8346 27.2632C59.9892 27.5137 59.079 27.4201 58.3022 27.0028C57.7795 26.7168 57.3427 26.2963 57.037 25.7849C56.7313 25.2734 56.5678 24.6896 56.5635 24.0938Z'
            fill='#31486E'
          />
          <path
            d='M50.043 21.5859C50.0121 21.297 50.0121 21.0055 50.043 20.7166L54.0555 4.49938C54.269 3.63952 54.8149 2.89951 55.5735 2.44185C56.3321 1.98419 57.2413 1.8463 58.1015 2.05844C58.9613 2.27187 59.7013 2.81782 60.159 3.57641C60.6167 4.33499 60.7546 5.2442 60.5424 6.10437L56.5299 22.3216C56.3165 23.1814 55.7705 23.9214 55.012 24.3791C54.2534 24.8367 53.3442 24.9746 52.484 24.7625C51.7887 24.5676 51.1751 24.1528 50.7351 23.5802C50.2952 23.0076 50.0524 22.308 50.043 21.5859ZM49.4746 4.03125C49.4746 3.14443 49.1223 2.29394 48.4953 1.66686C47.8682 1.03979 47.0177 0.6875 46.1309 0.6875C45.244 0.6875 44.3935 1.03979 43.7665 1.66686C43.1394 2.29394 42.7871 3.14443 42.7871 4.03125L43.1215 20.75C43.1215 21.1891 43.208 21.6239 43.376 22.0296C43.5441 22.4353 43.7904 22.8039 44.1008 23.1144C44.4113 23.4249 44.78 23.6712 45.1856 23.8392C45.5913 24.0073 46.0261 24.0938 46.4652 24.0938C46.9043 24.0938 47.3391 24.0073 47.7448 23.8392C48.1505 23.6712 48.5191 23.4249 48.8296 23.1144C49.1401 22.8039 49.3864 22.4353 49.5545 22.0296C49.7225 21.6239 49.809 21.1891 49.809 20.75L49.4746 4.03125Z'
            fill='#425D88'
          />
          <path
            d='M42.7536 20.75L38.1058 4.7C37.9772 3.81318 37.5016 3.01377 36.7836 2.47762C36.0656 1.94147 35.164 1.7125 34.2772 1.84109C33.3904 1.96968 32.591 2.44529 32.0548 3.16329C31.5187 3.88129 31.2897 4.78287 31.4183 5.66969C31.3836 5.95844 31.3836 6.25031 31.4183 6.53906L36.0661 22.5891C36.1855 23.0136 36.3878 23.4104 36.6612 23.7564C36.9345 24.1025 37.2737 24.3911 37.6591 24.6055C38.0445 24.82 38.4685 24.9561 38.9067 25.006C39.3449 25.0559 39.7886 25.0186 40.2124 24.8962C40.658 24.8028 41.0799 24.6193 41.4521 24.357C41.8243 24.0948 42.139 23.7592 42.3769 23.371C42.6149 22.9828 42.771 22.5501 42.8358 22.0994C42.9005 21.6487 42.8726 21.1895 42.7536 20.75ZM36.0327 22.89L27.3724 8.57875C27.1511 8.19839 26.857 7.86543 26.5068 7.59897C26.1567 7.33251 25.7573 7.13778 25.3318 7.02595C24.9062 6.91412 24.4627 6.88739 24.0268 6.94728C23.5909 7.00718 23.1711 7.15253 22.7914 7.375C22.2824 7.67664 21.8625 8.10796 21.5747 8.62491C21.2868 9.14186 21.1413 9.72593 21.153 10.3175C21.175 10.8979 21.3479 11.4626 21.6546 11.9559L30.2814 26.3341C30.7683 27.0035 31.4862 27.4686 32.2962 27.6393C33.1062 27.81 33.9507 27.6741 34.6663 27.2581C35.3819 26.842 35.9178 26.1753 36.1702 25.387C36.4226 24.5986 36.3736 23.7446 36.0327 22.9903V22.89Z'
            fill='#5272A6'
          />
          <path
            d='M30.0132 26.5681L17.9757 14.9653C17.6649 14.6519 17.295 14.4032 16.8876 14.2334C16.4801 14.0636 16.0431 13.9762 15.6016 13.9762C15.1602 13.9762 14.7232 14.0636 14.3157 14.2334C13.9082 14.4032 13.5384 14.6519 13.2276 14.9653C12.9156 15.2884 12.6719 15.6711 12.511 16.0905C12.3502 16.5099 12.2754 16.9574 12.2913 17.4063C12.3019 17.8454 12.3989 18.2781 12.5768 18.6797C12.7546 19.0813 13.0099 19.4439 13.3279 19.7469L25.3988 31.3163C26.0497 31.8533 26.8797 32.1245 27.7221 32.0752C28.5646 32.026 29.3572 31.66 29.9411 31.0507C30.525 30.4415 30.8569 29.6339 30.8703 28.7901C30.8837 27.9464 30.5775 27.1287 30.0132 26.5013V26.5681ZM25.1648 31.6841L10.5191 23.5922C9.74238 23.1749 8.83224 23.0813 7.98682 23.3318C7.1414 23.5823 6.42914 24.1566 6.00508 24.9297C5.71625 25.4393 5.56635 26.0158 5.57039 26.6016C5.58063 27.1917 5.74689 27.7686 6.05229 28.2737C6.35768 28.7787 6.79131 29.194 7.30914 29.4772L21.9548 37.4688C22.3409 37.6806 22.7652 37.8141 23.2031 37.8615C23.641 37.9089 24.0839 37.8693 24.5065 37.745C24.929 37.6207 25.3229 37.4142 25.6654 37.1373C26.0079 36.8603 26.2923 36.5184 26.5023 36.1313C26.8988 35.3611 26.981 34.4671 26.7315 33.6376C26.482 32.8081 25.9203 32.1077 25.1648 31.6841Z'
            fill='#597DB6'
          />
          <path
            d='M21.8216 37.87L5.60437 33.8575C4.7442 33.6454 3.83499 33.7833 3.07641 34.2409C2.31782 34.6986 1.77187 35.4386 1.55844 36.2984C1.52747 36.5874 1.52747 36.8788 1.55844 37.1678C1.57375 37.9031 1.83103 38.6127 2.29043 39.187C2.74984 39.7613 3.38574 40.168 4.09969 40.3444L20.25 44.3569C20.6823 44.4818 21.1354 44.5182 21.5821 44.4638C22.0288 44.4094 22.46 44.2655 22.8497 44.0405C23.2395 43.8156 23.5798 43.5142 23.8503 43.1546C24.1209 42.795 24.316 42.3845 24.4241 41.9476C24.5322 41.5108 24.551 41.0566 24.4793 40.6124C24.4077 40.1681 24.2472 39.7429 24.0073 39.3621C23.7674 38.9814 23.4531 38.653 23.0833 38.3966C22.7135 38.1402 22.2957 37.9611 21.855 37.87H21.8216ZM0.1875 48.4363C0.1875 47.5494 0.539787 46.6989 1.16686 46.0719C1.79394 45.4448 2.64443 45.0925 3.53125 45.0925L20.25 44.7581C20.6891 44.7581 21.1239 44.8446 21.5296 45.0127C21.9353 45.1807 22.3039 45.427 22.6144 45.7375C22.9249 46.048 23.1712 46.4166 23.3392 46.8223C23.5073 47.228 23.5938 47.6628 23.5938 48.1019C23.5938 48.541 23.5073 48.9758 23.3392 49.3815C23.1712 49.7872 22.9249 50.1558 22.6144 50.4663C22.3039 50.7768 21.9353 51.0231 21.5296 51.1911C21.1239 51.3591 20.6891 51.4456 20.25 51.4456L3.53125 51.78C2.64443 51.78 1.79394 51.4277 1.16686 50.8006C0.539787 50.1736 0.1875 49.3231 0.1875 48.4363Z'
            fill='#6790D2'
          />
          <path
            d='M24.5291 54.1875C24.4261 53.7358 24.2304 53.3105 23.9543 52.9385C23.6783 52.5665 23.328 52.2559 22.9255 52.0264C22.5231 51.7969 22.0774 51.6535 21.6167 51.6053C21.156 51.5572 20.6903 51.6053 20.2491 51.7466L4.19908 56.3944C3.47582 56.5966 2.84171 57.0365 2.39891 57.6431C1.9561 58.2496 1.7304 58.9876 1.75814 59.7381C1.75814 60.0056 1.75814 60.3066 1.75814 60.6075C2.00645 61.4588 2.58279 62.1767 3.36036 62.6031C4.13793 63.0295 5.05305 63.1296 5.90439 62.8813L21.9544 58.2334C22.3922 58.1427 22.8074 57.965 23.1753 57.711C23.5433 57.457 23.8566 57.1317 24.0966 56.7545C24.3367 56.3773 24.4986 55.9557 24.5729 55.5148C24.6472 55.0739 24.6323 54.6226 24.5291 54.1875ZM26.9366 59.6044C26.4787 58.8474 25.7395 58.3028 24.8809 58.0897C24.0223 57.8766 23.1143 58.0125 22.3556 58.4675L8.07783 67.1278C7.57502 67.4337 7.16183 67.8668 6.88002 68.3834C6.5982 68.9001 6.45775 69.482 6.47283 70.0703C6.48476 70.6477 6.64604 71.2122 6.94096 71.7087C7.39883 72.4657 8.138 73.0103 8.99659 73.2234C9.85519 73.4365 10.7632 73.3006 11.5219 72.8456L25.8331 64.2187C26.2097 63.9893 26.5371 63.6875 26.7966 63.331C27.0561 62.9744 27.2425 62.57 27.345 62.1412C27.4476 61.7123 27.4643 61.2673 27.3942 60.832C27.3241 60.3966 27.1686 59.9794 26.9366 59.6044Z'
            fill='#88ABE4'
          />
          <path
            d='M30.7819 64.3859C30.1554 63.7632 29.308 63.4136 28.4246 63.4136C27.5412 63.4136 26.6937 63.7632 26.0672 64.3859L14.4644 76.4234C14.15 76.7572 13.9077 77.1521 13.7523 77.5835C13.597 78.0149 13.5321 78.4737 13.5616 78.9312C13.5742 79.8132 13.9347 80.6545 14.5647 81.2719C14.8756 81.5853 15.2454 81.834 15.6529 82.0038C16.0603 82.1736 16.4974 82.2609 16.9388 82.2609C17.3802 82.2609 17.8173 82.1736 18.2247 82.0038C18.6322 81.834 19.002 81.5853 19.3129 81.2719L30.8822 69.2009C31.1995 68.8823 31.4492 68.503 31.6164 68.0857C31.7837 67.6684 31.865 67.2216 31.8557 66.7721C31.8463 66.3226 31.7464 65.8796 31.5619 65.4696C31.3774 65.0596 31.1121 64.6911 30.7819 64.3859ZM35.6972 67.9972C34.9205 67.5799 34.0103 67.4863 33.1649 67.7368C32.3195 67.9873 31.6072 68.5616 31.1832 69.3347L23.0913 83.9803C22.8285 84.4985 22.6911 85.0712 22.6901 85.6522C22.7061 86.2366 22.8751 86.8066 23.1802 87.3053C23.4853 87.804 23.9158 88.214 24.4288 88.4944C24.813 88.7075 25.2354 88.8429 25.6719 88.8927C26.1084 88.9425 26.5505 88.9058 26.9728 88.7847C27.3951 88.6636 27.7894 88.4605 28.1332 88.1869C28.477 87.9133 28.7635 87.5747 28.9763 87.1903L36.9679 72.5447C37.4011 71.7729 37.5106 70.8608 37.2724 70.0083C37.0342 69.1559 36.4678 68.4327 35.6972 67.9972Z'
            fill='#A9C5F3'
          />
          <path
            d='M41.4156 70.2375C40.5555 70.0254 39.6463 70.1633 38.8877 70.6209C38.1291 71.0786 37.5831 71.8186 37.3697 72.6784L33.3572 88.8956C33.3262 89.1846 33.3262 89.476 33.3572 89.765C33.3089 90.2041 33.3476 90.6484 33.471 91.0726C33.5944 91.4968 33.8001 91.8925 34.0765 92.2371C34.6346 92.9332 35.4463 93.379 36.3331 93.4766C37.22 93.5741 38.1092 93.3154 38.8053 92.7573C39.5013 92.1992 39.9472 91.3874 40.0447 90.5006L43.8566 74.25C44.0588 73.3946 43.916 72.494 43.4592 71.7431C43.0024 70.9921 42.2682 70.4513 41.4156 70.2375ZM50.8785 74.25C50.8785 73.3632 50.5262 72.5127 49.8991 71.8856C49.272 71.2585 48.4215 70.9063 47.5347 70.9063C46.6479 70.9063 45.7974 71.2585 45.1703 71.8856C44.5432 72.5127 44.191 73.3632 44.191 74.25L44.5253 90.9688C44.5253 91.8556 44.8776 92.7061 45.5047 93.3331C46.1318 93.9602 46.9823 94.3125 47.8691 94.3125C48.7559 94.3125 49.6064 93.9602 50.2335 93.3331C50.8605 92.7061 51.2128 91.8556 51.2128 90.9688L50.8785 74.25Z'
            fill='#C8DBFA'
          />
          <path
            d='M62.3145 88.3272L57.6667 72.2772C57.4246 71.4565 56.8771 70.7599 56.1369 70.3308C55.3967 69.9016 54.5201 69.7725 53.6876 69.97C52.9706 70.1785 52.344 70.621 51.9077 71.227C51.4714 71.833 51.2505 72.5676 51.2801 73.3138C51.2295 73.6013 51.2295 73.8955 51.2801 74.1831L55.928 90.2331C56.0298 90.6755 56.2207 91.0925 56.4889 91.4587C56.7571 91.8249 57.0971 92.1327 57.4881 92.3633C57.8792 92.5938 58.313 92.7423 58.7633 92.7998C59.2136 92.8572 59.6709 92.8224 60.1073 92.6974C60.5437 92.5724 60.95 92.3598 61.3016 92.0727C61.6532 91.7855 61.9426 91.4298 62.1523 91.0272C62.3619 90.6245 62.4874 90.1835 62.521 89.7308C62.5547 89.2781 62.4958 88.8233 62.348 88.3941L62.3145 88.3272ZM72.3458 82.9772L63.7189 68.6659C63.341 68.0278 62.7617 67.5334 62.0721 67.2605C61.3825 66.9876 60.6217 66.9517 59.9094 67.1585C59.1972 67.3652 58.5739 67.8029 58.1377 68.4027C57.7014 69.0025 57.4769 69.7303 57.4995 70.4716C57.5114 71.049 57.6727 71.6135 57.9676 72.11L66.628 86.4212C67.1274 87.0551 67.8393 87.487 68.6322 87.6371C69.4252 87.7873 70.2457 87.6456 70.9423 87.2382C71.639 86.8308 72.1648 86.1852 72.4227 85.4205C72.6806 84.6558 72.6533 83.8236 72.3458 83.0775V82.9772Z'
            fill='#E2EDFF'
          />
          <path
            d='M80.6715 75.1863L68.6006 63.6169C67.9741 62.9941 67.1266 62.6445 66.2432 62.6445C65.3599 62.6445 64.5124 62.9941 63.8859 63.6169C63.2722 64.2533 62.9356 65.1069 62.9496 65.9909C62.9602 66.43 63.0572 66.8628 63.2351 67.2644C63.4129 67.666 63.6682 68.0286 63.9862 68.3316L76.0237 79.9344C76.6666 80.5507 77.5281 80.8864 78.4185 80.8676C79.309 80.8488 80.1555 80.477 80.7718 79.8341C81.3882 79.1911 81.7239 78.3297 81.705 77.4392C81.6862 76.5488 81.3145 75.7023 80.6715 75.0859V75.1863ZM86.6903 65.5228L72.0446 57.5313C71.6585 57.3194 71.2343 57.1859 70.7964 57.1385C70.3585 57.0911 69.9155 57.1307 69.4929 57.255C69.0704 57.3793 68.6765 57.5858 68.334 57.8628C67.9915 58.1397 67.7071 58.4816 67.4971 58.8687C67.2036 59.3752 67.0642 59.9562 67.0959 60.5406C67.112 61.125 67.281 61.695 67.586 62.1937C67.8911 62.6924 68.3216 63.1024 68.8346 63.3828L83.4803 71.4747C84.257 71.892 85.1672 71.9855 86.0126 71.7351C86.858 71.4846 87.5703 70.9103 87.9943 70.1372C88.2181 69.7501 88.3619 69.3222 88.4173 68.8785C88.4728 68.4349 88.4387 67.9847 88.3171 67.5545C88.1955 67.1243 87.9889 66.7228 87.7095 66.3739C87.4301 66.0249 87.0835 65.7355 86.6903 65.5228Z'
            fill='#D8E2F2'
          />
          <path
            d='M90.0014 54.6556L73.7508 50.6431C72.8906 50.431 71.9814 50.5689 71.2228 51.0265C70.4642 51.4842 69.9183 52.2242 69.7049 53.0841C69.6739 53.373 69.6739 53.6645 69.7049 53.9534C69.7202 54.6887 69.9775 55.3984 70.4369 55.9726C70.8963 56.5469 71.5322 56.9537 72.2461 57.13L88.4633 61.1425C88.8956 61.2674 89.3487 61.3038 89.7954 61.2494C90.2421 61.1951 90.6733 61.0511 91.063 60.8261C91.4528 60.6012 91.7931 60.2999 92.0636 59.9402C92.3342 59.5806 92.5293 59.1701 92.6374 58.7333C92.7455 58.2964 92.7643 57.8423 92.6926 57.398C92.621 56.9537 92.4605 56.5285 92.2206 56.1477C91.9807 55.767 91.6664 55.4386 91.2966 55.1822C90.9268 54.9258 90.509 54.7467 90.0683 54.6556H90.0014Z'
            fill='white'
          />
        </svg>
      </Spinner>
    </Box>
  )
}

export default LoadingOverlay

// example usage
//
//
//
// const [loading, setLoading] = useState(false)
// useEffect(() => {
//     setLoading(true)
//     setTimeout(() => setLoading(false), 3000)
//   }, [])
// onClick={() => setLoading(true)}
// <LoadingOverlay text="Connecting..." open={loading} />
